"use strict";(self.webpackChunkkeycloakify=self.webpackChunkkeycloakify||[]).push([[9286],{"./dist/login/pages/WebauthnAuthenticate.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>WebauthnAuthenticate});__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),clsx=__webpack_require__("./dist/tools/clsx.js"),lib_kcClsx=__webpack_require__("./dist/login/lib/kcClsx.js"),useInsertScriptTags=__webpack_require__("./dist/tools/useInsertScriptTags.js"),assert=__webpack_require__("./dist/tools/assert.js");function WebauthnAuthenticate(props){var kcContext=props.kcContext,i18n=props.i18n,doUseDefaultCss=props.doUseDefaultCss,Template=props.Template,classes=props.classes,kcClsx=(0,lib_kcClsx.$)({doUseDefaultCss,classes}).kcClsx,url=kcContext.url,realm=kcContext.realm,registrationDisabled=kcContext.registrationDisabled,authenticators=kcContext.authenticators,shouldDisplayAuthenticators=kcContext.shouldDisplayAuthenticators,msg=i18n.msg,msgStr=i18n.msgStr,advancedMsg=i18n.advancedMsg;return function useScript(params){var authButtonId=params.authButtonId,kcContext=params.kcContext,i18n=params.i18n,url=kcContext.url,isUserIdentified=kcContext.isUserIdentified,challenge=kcContext.challenge,userVerification=kcContext.userVerification,rpId=kcContext.rpId,createTimeout=kcContext.createTimeout,msgStr=i18n.msgStr,isFetchingTranslations=i18n.isFetchingTranslations,insertScriptTags=(0,useInsertScriptTags.m)({componentOrHookName:"WebauthnAuthenticate",scriptTags:[{type:"module",textContent:function textContent(){return'\n\n                    import { authenticateByWebAuthn } from "'+url.resourcesPath+"/js/webauthnAuthenticate.js\";\n                    const authButton = document.getElementById('"+authButtonId+'\');\n                    authButton.addEventListener("click", function() {\n                        const input = {\n                            isUserIdentified : '+isUserIdentified+",\n                            challenge : '"+challenge+"',\n                            userVerification : '"+userVerification+"',\n                            rpId : '"+rpId+"',\n                            createTimeout : "+createTimeout+",\n                            errmsg : "+JSON.stringify(msgStr("webauthn-unsupported-browser-text"))+"\n                        };\n                        authenticateByWebAuthn(input);\n                    });\n                "}}]}).insertScriptTags;(0,react.useEffect)((function(){isFetchingTranslations||insertScriptTags()}),[isFetchingTranslations])}({authButtonId:"authenticateWebAuthnButton",kcContext,i18n}),(0,jsx_runtime.jsx)(Template,Object.assign({kcContext,i18n,doUseDefaultCss,classes,displayInfo:realm.registrationAllowed&&!registrationDisabled,infoNode:(0,jsx_runtime.jsx)("div",Object.assign({id:"kc-registration"},{children:(0,jsx_runtime.jsxs)("span",{children:[msg("noAccount")," ",(0,jsx_runtime.jsx)("a",Object.assign({tabIndex:6,href:url.registrationUrl},{children:msg("doRegister")}))]})})),headerNode:msg("webauthn-login-title")},{children:(0,jsx_runtime.jsxs)("div",Object.assign({id:"kc-form-webauthn",className:kcClsx("kcFormClass")},{children:[(0,jsx_runtime.jsxs)("form",Object.assign({id:"webauth",action:url.loginAction,method:"post"},{children:[(0,jsx_runtime.jsx)("input",{type:"hidden",id:"clientDataJSON",name:"clientDataJSON"}),(0,jsx_runtime.jsx)("input",{type:"hidden",id:"authenticatorData",name:"authenticatorData"}),(0,jsx_runtime.jsx)("input",{type:"hidden",id:"signature",name:"signature"}),(0,jsx_runtime.jsx)("input",{type:"hidden",id:"credentialId",name:"credentialId"}),(0,jsx_runtime.jsx)("input",{type:"hidden",id:"userHandle",name:"userHandle"}),(0,jsx_runtime.jsx)("input",{type:"hidden",id:"error",name:"error"})]})),(0,jsx_runtime.jsxs)("div",Object.assign({className:(0,clsx.W)(kcClsx("kcFormGroupClass"),"no-bottom-margin")},{children:[authenticators&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("form",Object.assign({id:"authn_select",className:kcClsx("kcFormClass")},{children:authenticators.authenticators.map((function(authenticator){return(0,jsx_runtime.jsx)("input",{type:"hidden",name:"authn_use_chk",value:authenticator.credentialId})}))})),shouldDisplayAuthenticators&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[authenticators.authenticators.length>1&&(0,jsx_runtime.jsx)("p",Object.assign({className:kcClsx("kcSelectAuthListItemTitle")},{children:msg("webauthn-available-authenticators")})),(0,jsx_runtime.jsx)("div",Object.assign({className:kcClsx("kcFormOptionsClass")},{children:authenticators.authenticators.map((function(authenticator,i){var _a,className;return(0,jsx_runtime.jsxs)("div",Object.assign({id:"kc-webauthn-authenticator-item-"+i,className:kcClsx("kcSelectAuthListItemClass")},{children:[(0,jsx_runtime.jsx)("div",Object.assign({className:kcClsx("kcSelectAuthListItemIconClass")},{children:(0,jsx_runtime.jsx)("i",{className:(0,clsx.W)((className=kcClsx(authenticator.transports.iconClass),className===authenticator.transports.iconClass?kcClsx("kcWebAuthnDefaultIcon"):className),kcClsx("kcSelectAuthListItemIconPropertyClass"))})})),(0,jsx_runtime.jsxs)("div",Object.assign({className:kcClsx("kcSelectAuthListItemArrowIconClass")},{children:[(0,jsx_runtime.jsx)("div",Object.assign({id:"kc-webauthn-authenticator-label-"+i,className:kcClsx("kcSelectAuthListItemHeadingClass")},{children:advancedMsg(authenticator.label)})),(null===(_a=authenticator.transports.displayNameProperties)||void 0===_a?void 0:_a.length)&&(0,jsx_runtime.jsx)("div",Object.assign({id:"kc-webauthn-authenticator-transport-"+i,className:kcClsx("kcSelectAuthListItemDescriptionClass")},{children:authenticator.transports.displayNameProperties.map((function(displayNameProperty,i,arr){return{displayNameProperty,hasNext:i!==arr.length-1}})).map((function(_ref){var displayNameProperty=_ref.displayNameProperty,hasNext=_ref.hasNext;return(0,jsx_runtime.jsxs)(react.Fragment,{children:[advancedMsg(displayNameProperty),hasNext&&(0,jsx_runtime.jsx)("span",{children:", "})]},displayNameProperty)}))})),(0,jsx_runtime.jsxs)("div",Object.assign({className:kcClsx("kcSelectAuthListItemDescriptionClass")},{children:[(0,jsx_runtime.jsx)("span",Object.assign({id:"kc-webauthn-authenticator-createdlabel-"+i},{children:msg("webauthn-createdAt-label")})),(0,jsx_runtime.jsx)("span",Object.assign({id:"kc-webauthn-authenticator-created-"+i},{children:authenticator.createdAt}))]})),(0,jsx_runtime.jsx)("div",{className:kcClsx("kcSelectAuthListItemFillClass")})]}))]}),i)}))}))]})]}),(0,jsx_runtime.jsx)("div",Object.assign({id:"kc-form-buttons",className:kcClsx("kcFormButtonsClass")},{children:(0,jsx_runtime.jsx)("input",{id:"authenticateWebAuthnButton",type:"button",autoFocus:!0,value:msgStr("webauthn-doAuthenticate"),className:kcClsx("kcButtonClass","kcButtonPrimaryClass","kcButtonBlockClass","kcButtonLargeClass")})}))]}))]}))}))}(0,assert.h)(),(0,assert.h)()}}]);